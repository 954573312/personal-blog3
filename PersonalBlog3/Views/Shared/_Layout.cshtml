<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - 陈嵩源的个人博客</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .blog-header { text-align: center; padding: 30px 0; }
        .blog-title { font-size: 2.5rem; margin-bottom: 10px; }
        .blog-desc { color: #666; }
        .publish-btn { text-align: center; margin-bottom: 20px; }
        .article-card { border: 1px solid #eee; padding: 15px; margin-bottom: 15px; border-radius: 4px; }
        .category-bar { background: #f8f9fa; padding: 15px; border-radius: 4px; margin-bottom: 15px; }
        .category-bar h5 { 
            background: #0d6efd; color: white; 
            padding: 8px; margin: -15px -15px 15px -15px;
            border-top-left-radius: 4px; border-top-right-radius: 4px;
        }
        .add-category { float: right; font-size: 0.8rem; color: white; text-decoration: none; }
        .auth-info { text-align: right; margin-top: 10px; }
        .nav-bar { margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <!-- 右上角登录信息 -->
        <div class="auth-info">
            @if (User.Identity.IsAuthenticated)
            {
                <span>欢迎, @User.Identity.Name</span>
                <a asp-page="/Account/Logout" class="ms-2">注销</a>
            }
            else
            {
                <a asp-page="/Account/Login" class="me-2">登录</a>
                <a asp-page="/Account/Register">注册</a>
            }
        </div>

        <!-- 导航栏 -->
        <div class="nav-bar">
            <a asp-action="Index" asp-controller="Home" class="me-3">首页</a>
            <a asp-action="Privacy" asp-controller="Home" class="me-3">隐私政策</a>
        </div>

        <!-- 博客标题 -->
        <div class="blog-header">
            <h1 class="blog-title">陈嵩源的个人博客</h1>
            <p class="blog-desc">记录技术成长，分享学习心得</p>
        </div>

        <!-- 发布按钮 -->
        <div class="publish-btn">
            @if (User.Identity.IsAuthenticated)
            {
                <a asp-action="Create" asp-controller="Posts" class="btn btn-primary">发布新文章</a>
            }
            else
            {
                <a asp-page="/Account/Login" class="btn btn-primary">登录后发布文章</a>
            }
        </div>

        <!-- 主体内容 -->
        <div class="row">
            <div class="col-md-8">
                <h3>最新文章</h3>
                @RenderBody()
            </div>
            <div class="col-md-4">
                <!-- 分类栏 -->
                <div class="category-bar">
                    <h5>
                        文章分类
                        @if (User.Identity.IsAuthenticated)
                        {
                            <a asp-action="Create" asp-controller="Categories" class="add-category">添加分类</a>
                        }
                    </h5>
                    <ul class="list-unstyled">
                        <li><a href="#">全部文章</a></li>
                        @foreach (var category in ViewBag.Categories)
                        {
                            <li><a href="#">@category.Name</a></li>
                        }
                    </ul>
                </div>
                <!-- 关于博客 -->
                <div class="category-bar">
                    <h5>关于博客</h5>
                    <p>基于ASP.NET Core构建的个人博客系统</p>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="mt-5 text-center text-muted">
            <p>© 2025 陈嵩源的个人博客</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>